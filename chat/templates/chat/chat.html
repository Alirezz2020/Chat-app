<!-- ChatProject/chat/templates/chat/chat.html -->
{% extends 'chat/base.html' %}
{% load static %}
{% block title %}Chat with {{ friend.username }} - ChatProject{% endblock %}

{% block extra_css %}
  <link rel="stylesheet" href="{% static 'chat/css/chat.css' %}">
{% endblock %}

{% block content %}
<h2>Chat with {{ friend.username }}</h2>
<div id="chat-log" class="chat-container" data-friend-id="{{ friend.profile.individual_id }}" data-username="{{ request.user.username }}">
    {% for msg in messages %}
        {% if msg.sender == request.user %}
            <div class="user-message">
                <p>{{ msg.content }}</p>
                <div class="message-ticks">
                    {% if msg.status == 'sent' %}
                        ✓
                    {% elif msg.status == 'delivered' %}
                        ✓✓
                    {% elif msg.status == 'read' %}
                        ✓✓
                    {% endif %}
                </div>
            </div>
        {% else %}
            <div class="friend-message">
                <p>{{ msg.content }}</p>
            </div>
        {% endif %}
    {% endfor %}
</div>
<div class="input-group mt-3">
    <input id="chat-message-input" type="text" class="form-control" placeholder="Type your message...">
    <button id="chat-message-send" class="btn btn-primary">Send</button>
</div>
{% endblock %}

{% block extra_js %}
  <script src="{% static 'chat/js/chat.js' %}"></script>
{% endblock %}
